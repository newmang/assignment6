<!DOCTYPE html>
 <head> 
  <title>Newmang Blocks</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <script type="text/javascript" src="phonegap.js"></script>
  <script src="cdv-plugin-fb-connect.js"></script>
  <script src="facebook-js-sdk.js"></script>
  <!-- <script src="cdv-plugin-fb-connect.js"></script> -->
  <!-- <script src="facebook_js_sdk.js"></script> -->
<!-- Generate an anroid key: http://www.youtube.com/watch?v=Cnp-QJttcjM -->
</head>
<body>
  <div id="fb-root"></div>
  <script>
    var myHighScore = 0;
    var accessToken;

    window.fbAsyncInit = function() {
      FB.init({
        appId      : '473600756038526', // App ID
        channelUrl : '//www.anarchyarcade.com/cse/mobile/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });

      FB.getLoginStatus(function(response) {
        FB.Event.subscribe('auth.login', function(response) { loginResponse(response); });
        loginResponse(response);
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));

  function loginResponse(response) {
    if( response.status === 'connected' ) {
      UpdateHighScore();
//      accessToken = response.authResponse.accessToken;
    }
    else {
      alert("not logged in");
    }
  }

function UpdateHighScore() {
  // Get the player's high score
  FB.api('/me/scores', function(response) {

    // Step through the player's scores until you find our App's
    for( var i = 0; i < response.data.length; i++ ) {
      if( response.data[i]["application"] != undefined && response.data[i]["application"]["id"] == "473600756038526" ) {
        myHighScore = response.data[i]["score"];
        alert(myHighScore);
        break;
      }
    }
  });
}

function SetScore(myScore) {
      var opts = { score : myScore };
      FB.api('/me/scores', 'post', opts, function(response) {
        alert(response);
      });
}
  </script>

  <fb:login-button show-faces="true" width="200" max-rows="1" scope="publish_actions">
  </fb:login-button>

  <h3>Stuffed Cookies</h3>

  <form>
    <input type="button" value="Cook" onclick="postCook()" />
  </form>

<a href="javascript:UpdateHighScore();">Update High Score</A><br />
<a href="javascript:SetScore(567);">Set score to 567</a><br />
<a href="javascript:SetScore(420);">Set score to 420</a><br />


</body>
</html>